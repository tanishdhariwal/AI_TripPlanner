const {
    GoogleGenerativeAI,
    HarmCategory,
    HarmBlockThreshold,
  } = require("@google/generative-ai");
  
  const apiKey = process.env.EXPO_PUBLIC_GEMINI_API_KEY;
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-2.0-flash-exp",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 40,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
  };
  
  export const chatSession = model.startChat({
      generationConfig,
      history: [
        {
          role: "user",
          parts: [
            {text: "Generate travel plan for location: Hyderabad, Telangana, India, for 3 days and 2 nights for Couple with a High Price Budget with Flight Details, Flight Price for with booking URL, Hotel Options list with hotel names, hotel addresses, hotel image url, geo coordinates, rating, description and places to visit nearby with place name, details, image url, geo coordinates, ticket pricing if any, time taken for travelling to each location for 3 days and 2 nights. Also provide the total cost of the trip and the total time taken for the trip, give each days plan to the user and give best time to visit. Make sure to give all these details in  the JSON Format."},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "```json\n{\n  \"trip_name\": \"Hyderabad Luxury Escape for Couples\",\n  \"location\": \"Hyderabad, Telangana, India\",\n  \"duration\": \"3 Days, 2 Nights\",\n  \"travelers\": \"Couple\",\n  \"budget\": \"High Price\",\n    \"best_time_to_visit\": \"October to March (Pleasant Weather)\",\n  \"flight_details\": {\n      \"departure_city\": \"Your Departure City\",\n       \"arrival_city\": \"Hyderabad (HYD)\",\n      \"recommended_airline\": \"IndiGo/Air India/Vistara\",\n      \"price_range\": \"₹10,000 - ₹25,000 (Round Trip per Couple)\",\n      \"booking_url\": \"https://www.makemytrip.com/flights/\",\n        \"example_flight\": {\n            \"airline\": \"IndiGo\",\n            \"departure_time\": \"08:00 AM\",\n            \"arrival_time\": \"09:30 AM\",\n              \"price\": \"₹12,000 per couple (Round Trip)\"\n    }\n  },\n  \"hotel_options\": [\n    {\n      \"hotel_name\": \"Taj Falaknuma Palace\",\n      \"hotel_address\": \"Engine Bowli, Falaknuma, Hyderabad, Telangana 500053\",\n      \"hotel_image_url\": \"https://example.com/taj_falaknuma.jpg\",\n      \"geo_coordinates\": {\"latitude\": 17.3583, \"longitude\": 78.4808},\n      \"rating\": 4.8,\n        \"description\": \"A luxurious palace hotel offering a royal experience with opulent rooms, fine dining, and breathtaking views.\",\n      \"nearby_places\": [\n          {\"place_name\": \"Charminar\", \"travel_time\": \"20 minutes by car\"}\n      ]\n    },\n    {\n      \"hotel_name\": \"ITC Kohenur, Hyderabad\",\n      \"hotel_address\": \"Plot No. 5, Survey No. 83/1, Hyderabad Knowledge City, Madhapur, Hyderabad, Telangana 500081\",\n      \"hotel_image_url\": \"https://example.com/itc_kohenur.jpg\",\n      \"geo_coordinates\": {\"latitude\": 17.4455, \"longitude\": 78.3825},\n      \"rating\": 4.7,\n        \"description\": \"A modern luxury hotel with elegant rooms, multiple dining options, and a spa.\",\n      \"nearby_places\": [\n           {\"place_name\": \"Hitech City\", \"travel_time\": \"5 minutes by car\"}\n      ]\n    },\n     {\n      \"hotel_name\": \"Park Hyatt Hyderabad\",\n      \"hotel_address\": \"Road Number 2, Banjara Hills, Hyderabad, Telangana 500034\",\n      \"hotel_image_url\": \"https://example.com/park_hyatt.jpg\",\n        \"geo_coordinates\": {\"latitude\": 17.4189, \"longitude\": 78.4426},\n      \"rating\": 4.6,\n       \"description\":\"A refined luxury hotel with spacious rooms, a variety of dining experiences, and a serene ambiance.\",\n       \"nearby_places\":[\n           {\"place_name\": \"Banjara Hills\", \"travel_time\": \"5 minutes by car\"}\n       ]\n    }\n  ],\n  \"daily_plan\": {\n    \"day1\": {\n      \"theme\": \"Royal Heritage & Old City Charm\",\n       \"activities\": [\n         {\n          \"time\": \"09:30 AM\",\n           \"activity\": \"Arrive at Hyderabad Airport, Check-in to Hotel\",\n              \"details\": \"Upon arrival, transfer to your chosen hotel and check in. Allow time to refresh after your flight\",\n              \"duration\": \"2 hours\"\n          },\n        {\n          \"time\": \"11:30 AM\",\n            \"activity\":\"Visit Charminar\",\n            \"details\": \"Explore the iconic Charminar, a majestic historical landmark.\",\n              \"image_url\":\"https://example.com/charminar.jpg\",\n            \"geo_coordinates\":{\"latitude\": 17.3615, \"longitude\": 78.4746},\n            \"ticket_price\": \"₹25 per person\",\n             \"travel_time\": \"30 minutes\",\n           \"duration\": \"2 hours\"\n        },\n         {\n          \"time\": \"01:30 PM\",\n           \"activity\":\"Lunch at a traditional restaurant near Charminar\",\n             \"details\": \"Savor authentic Hyderabadi cuisine at a local restaurant.\",\n             \"duration\": \"1 hour\"\n        },\n         {\n          \"time\": \"02:30 PM\",\n           \"activity\":\"Explore the Laad Bazaar\",\n            \"details\": \"Wander through the vibrant Laad Bazaar, known for its bangles and traditional items.\",\n               \"travel_time\": \"5 minutes\",\n             \"duration\": \"2 hours\"\n        },\n         {\n           \"time\": \"04:30 PM\",\n           \"activity\": \"Visit Chowmahalla Palace\",\n              \"details\": \"Tour the magnificent Chowmahalla Palace, the seat of the Asaf Jahi dynasty.\",\n            \"image_url\": \"https://example.com/chowmahalla_palace.jpg\",\n            \"geo_coordinates\": {\"latitude\": 17.3582, \"longitude\": 78.4764},\n               \"ticket_price\":\"₹200 per person\",\n                \"travel_time\": \"15 minutes\",\n             \"duration\": \"2 hours\"\n         },\n            {\n             \"time\":\"07:00 PM\",\n               \"activity\":\"Evening at the hotel or option for fine dining\",\n               \"details\":\"Relax at the hotel or enjoy a fine-dining experience at a renowned restaurant. (Recommended: Dinner at Adaa Restaurant in Taj Falaknuma or a similar high-end restaurant).\",\n             \"duration\":\"Flexible\"\n            }\n       ]\n    },\n      \"day2\":{\n          \"theme\":\"Art, Culture, and Lakeside Views\",\n          \"activities\":[\n               {\n                   \"time\": \"09:00 AM\",\n                   \"activity\": \"Breakfast at the hotel\",\n                   \"details\": \"Enjoy a leisurely breakfast at the hotel.\",\n                   \"duration\": \"1 hour\"\n               },\n               {\n                   \"time\": \"10:00 AM\",\n                   \"activity\": \"Visit Salar Jung Museum\",\n                   \"details\":\"Explore the vast collection of art and artifacts at the Salar Jung Museum.\",\n                   \"image_url\":\"https://example.com/salar_jung_museum.jpg\",\n                  \"geo_coordinates\":{\"latitude\": 17.3713, \"longitude\": 78.4834},\n                    \"ticket_price\":\"₹150 per person\",\n                   \"travel_time\": \"30 minutes\",\n                   \"duration\": \"3 hours\"\n               },\n               {\n                  \"time\":\"01:00 PM\",\n                   \"activity\":\"Lunch at a restaurant near Hussain Sagar Lake\",\n                  \"details\":\"Have lunch at a lakeside restaurant offering scenic views.\",\n                     \"duration\": \"1 hour\"\n                },\n                {\n                  \"time\":\"02:00 PM\",\n                   \"activity\":\"Explore Hussain Sagar Lake and Buddha Statue\",\n                    \"details\":\"Enjoy a boat ride on Hussain Sagar Lake and admire the monolithic Buddha statue.\",\n                    \"image_url\":\"https://example.com/hussain_sagar_lake.jpg\",\n                    \"geo_coordinates\":{\"latitude\":17.4227, \"longitude\":78.4780},\n                    \"ticket_price\":\"₹100 per person for boat ride\",\n                    \"travel_time\": \"20 minutes\",\n                    \"duration\":\"2 hours\"\n                },\n                  {\n                   \"time\":\"04:00 PM\",\n                   \"activity\":\"Visit Birla Mandir\",\n                      \"details\":\"Visit the serene Birla Mandir, offering panoramic city views.\",\n                     \"image_url\":\"https://example.com/birla_mandir.jpg\",\n                       \"geo_coordinates\":{\"latitude\":17.4063, \"longitude\":78.4696},\n                    \"ticket_price\":\"Free Entry\",\n                       \"travel_time\":\"20 minutes\",\n                     \"duration\": \"2 hours\"\n                  },\n              {\n                  \"time\":\"06:00 PM\",\n                    \"activity\":\"Shopping or Leisure\",\n                     \"details\":\"Option for shopping at upscale malls (like GVK One, Inorbit Mall) or spa treatments. OR return to hotel for relaxation\",\n                    \"duration\": \"Flexible\"\n                  },\n            {\n              \"time\": \"08:00 PM\",\n                 \"activity\": \"Dinner at a High-end Restaurant\",\n                  \"details\": \"Experience fine dining at a luxurious restaurant.\",\n                \"duration\": \"Flexible\"\n            }\n          ]\n      },\n      \"day3\": {\n      \"theme\": \"Modern Hyderabad and Departure\",\n        \"activities\": [\n         {\n           \"time\":\"09:00 AM\",\n            \"activity\":\"Breakfast at the hotel\",\n           \"details\": \"Enjoy a leisurely breakfast at the hotel.\",\n           \"duration\": \"1 hour\"\n         },\n          {\n            \"time\": \"10:00 AM\",\n            \"activity\": \"Visit Golconda Fort\",\n           \"details\": \"Explore the historic Golconda Fort, known for its architecture and history.\",\n            \"image_url\": \"https://example.com/golconda_fort.jpg\",\n            \"geo_coordinates\": {\"latitude\": 17.3833, \"longitude\": 78.3939},\n             \"ticket_price\": \"₹100 per person\",\n            \"travel_time\": \"30 minutes\",\n            \"duration\": \"3 hours\"\n          },\n         {\n              \"time\": \"01:00 PM\",\n              \"activity\": \"Lunch at a contemporary restaurant\",\n              \"details\": \"Enjoy a meal at a modern restaurant with varied cuisines.\",\n                \"duration\": \"1 hour\"\n           },\n          {\n            \"time\":\"02:00 PM\",\n              \"activity\":\"Visit Qutb Shahi Tombs\",\n              \"details\":\"Explore the beautiful Qutb Shahi Tombs, a complex of mausoleums.\",\n              \"image_url\": \"https://example.com/qutb_shahi_tombs.jpg\",\n              \"geo_coordinates\":{\"latitude\":17.3791,\"longitude\":78.4019},\n              \"ticket_price\":\"₹50 per person\",\n              \"travel_time\":\"15 minutes\",\n              \"duration\":\"2 hours\"\n          },\n          {\n              \"time\": \"04:00 PM\",\n              \"activity\":\"Return to Hotel, Check Out\",\n              \"details\":\"Head back to the hotel, check out and proceed to airport for departure\",\n              \"duration\": \"1 hours\"\n          },\n          {\n            \"time\":\"05:00 PM\",\n              \"activity\":\"Departure from Hyderabad Airport\",\n              \"details\":\"Transfer to Hyderabad Airport for your flight back home\",\n            \"duration\":\"Flexible\"\n          }\n        ]\n      }\n    },\n    \"total_trip_cost\": \"₹70,000 - ₹150,000 (Including flights, luxury accommodation, fine dining, tickets, and activities for a couple)\",\n   \"total_trip_time\": \"Approximately 3 days and 2 nights\"\n}\n```"},
          ],
        },
      ],
    });
  
    // const result = await chatSession.sendMessage("INSERT_INPUT_HERE");
    // console.log(result.response.text());